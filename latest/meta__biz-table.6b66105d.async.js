"use strict";(self.webpackChunkantd_more=self.webpackChunkantd_more||[]).push([[2332],{4120:function(m,t,e){var s;e.r(t),e.d(t,{demos:function(){return D}});var p=e(90228),l=e.n(p),I=e(87999),a=e.n(I),r=e(75271),c=e(80305),i=e(81495),T=e(90674),P=e.n(T),y=e(76241),E=e(56631),f=e(25517),o=e(42408),u=e(55084),_=e(68303),R=e(67849),B=e(4814),C=e(96653),z=e(34334),M=e(83704),D={"biz-table-demo-demo1":{component:r.memo(r.lazy(function(){return e.e(7423).then(e.bind(e,77957))})),asset:{type:"BLOCK",id:"biz-table-demo-demo1",refAtomIds:["biz-table"],dependencies:{"index.tsx":{type:"FILE",value:e(57821).Z},react:{type:"NPM",value:"18.3.1"},"antd-more":{type:"NPM",value:"6.0.3"},"./service.ts":{type:"FILE",value:e(68632).Z},mockjs:{type:"NPM",value:"1.1.0"},ut2:{type:"NPM",value:"1.21.0"}},entry:"index.tsx"},context:{"./service.ts":i,react:s||(s=e.t(r,2)),"antd-more":c,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/service.ts":i,mockjs:T,ut2:y},renderOpts:{compile:function(){var h=a()(l()().mark(function v(){var d,g=arguments;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.e(1216).then(e.bind(e,11333));case 2:return n.abrupt("return",(d=n.sent).default.apply(d,g));case 3:case"end":return n.stop()}},v)}));function b(){return h.apply(this,arguments)}return b}()}},"biz-table-demo-demo2":{component:r.memo(r.lazy(function(){return e.e(7423).then(e.bind(e,57872))})),asset:{type:"BLOCK",id:"biz-table-demo-demo2",refAtomIds:["biz-table"],dependencies:{"index.tsx":{type:"FILE",value:e(26994).Z},react:{type:"NPM",value:"18.3.1"},antd:{type:"NPM",value:"6.1.3"},"antd-more":{type:"NPM",value:"6.0.3"},"./constants.ts":{type:"FILE",value:e(14156).Z},"./service.ts":{type:"FILE",value:e(68632).Z},mockjs:{type:"NPM",value:"1.1.0"},ut2:{type:"NPM",value:"1.21.0"}},entry:"index.tsx"},context:{"./constants.ts":f,"./service.ts":i,react:s||(s=e.t(r,2)),antd:E,"antd-more":c,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/constants.ts":f,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/service.ts":i,mockjs:T,ut2:y},renderOpts:{compile:function(){var h=a()(l()().mark(function v(){var d,g=arguments;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.e(1216).then(e.bind(e,11333));case 2:return n.abrupt("return",(d=n.sent).default.apply(d,g));case 3:case"end":return n.stop()}},v)}));function b(){return h.apply(this,arguments)}return b}()}},"biz-table-demo-define-render":{component:r.memo(r.lazy(function(){return e.e(7423).then(e.bind(e,46207))})),asset:{type:"BLOCK",id:"biz-table-demo-define-render",refAtomIds:["biz-table"],dependencies:{"index.tsx":{type:"FILE",value:e(48934).Z},react:{type:"NPM",value:"18.3.1"},"antd-more":{type:"NPM",value:"6.0.3"},"./constants.ts":{type:"FILE",value:e(14156).Z},"./utils/field.tsx":{type:"FILE",value:e(91793).Z},"./service.ts":{type:"FILE",value:e(68632).Z},mockjs:{type:"NPM",value:"1.1.0"},"util-helpers":{type:"NPM",value:"5.7.4"},ut2:{type:"NPM",value:"1.21.0"},antd:{type:"NPM",value:"6.1.3"}},entry:"index.tsx"},context:{"./constants.ts":f,"./utils/field.tsx":o,"./service.ts":i,react:s||(s=e.t(r,2)),"antd-more":c,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/constants.ts":f,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/utils/field.tsx":o,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/service.ts":i,mockjs:T,"util-helpers":u,ut2:y,antd:E},renderOpts:{compile:function(){var h=a()(l()().mark(function v(){var d,g=arguments;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.e(1216).then(e.bind(e,11333));case 2:return n.abrupt("return",(d=n.sent).default.apply(d,g));case 3:case"end":return n.stop()}},v)}));function b(){return h.apply(this,arguments)}return b}()}},"biz-table-demo-demo3":{component:r.memo(r.lazy(function(){return e.e(7423).then(e.bind(e,4721))})),asset:{type:"BLOCK",id:"biz-table-demo-demo3",refAtomIds:["biz-table"],dependencies:{"index.tsx":{type:"FILE",value:e(91403).Z},react:{type:"NPM",value:"18.3.1"},"antd-more":{type:"NPM",value:"6.0.3"},"./service.ts":{type:"FILE",value:e(68632).Z},mockjs:{type:"NPM",value:"1.1.0"},ut2:{type:"NPM",value:"1.21.0"}},entry:"index.tsx"},context:{"./service.ts":i,react:s||(s=e.t(r,2)),"antd-more":c,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/service.ts":i,mockjs:T,ut2:y},renderOpts:{compile:function(){var h=a()(l()().mark(function v(){var d,g=arguments;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.e(1216).then(e.bind(e,11333));case 2:return n.abrupt("return",(d=n.sent).default.apply(d,g));case 3:case"end":return n.stop()}},v)}));function b(){return h.apply(this,arguments)}return b}()}},"biz-table-demo-async-initial-values":{component:r.memo(r.lazy(function(){return e.e(7423).then(e.bind(e,40380))})),asset:{type:"BLOCK",id:"biz-table-demo-async-initial-values",refAtomIds:["biz-table"],dependencies:{"index.tsx":{type:"FILE",value:e(62126).Z},react:{type:"NPM",value:"18.3.1"},ut2:{type:"NPM",value:"1.21.0"},"antd-more":{type:"NPM",value:"6.0.3"},"./constants.ts":{type:"FILE",value:e(14156).Z},"./service.ts":{type:"FILE",value:e(68632).Z},mockjs:{type:"NPM",value:"1.1.0"}},entry:"index.tsx"},context:{"./constants.ts":f,"./service.ts":i,react:s||(s=e.t(r,2)),ut2:y,"antd-more":c,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/constants.ts":f,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/service.ts":i,mockjs:T},renderOpts:{compile:function(){var h=a()(l()().mark(function v(){var d,g=arguments;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.e(1216).then(e.bind(e,11333));case 2:return n.abrupt("return",(d=n.sent).default.apply(d,g));case 3:case"end":return n.stop()}},v)}));function b(){return h.apply(this,arguments)}return b}()}},"biz-table-demo-search-form-ref-1":{component:r.memo(r.lazy(function(){return e.e(7423).then(e.bind(e,76107))})),asset:{type:"BLOCK",id:"biz-table-demo-search-form-ref-1",refAtomIds:["biz-table"],dependencies:{"index.tsx":{type:"FILE",value:e(36297).Z},react:{type:"NPM",value:"18.3.1"},"antd-more":{type:"NPM",value:"6.0.3"},"./service.ts":{type:"FILE",value:e(68632).Z},mockjs:{type:"NPM",value:"1.1.0"},ut2:{type:"NPM",value:"1.21.0"}},entry:"index.tsx"},context:{"./service.ts":i,react:s||(s=e.t(r,2)),"antd-more":c,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/service.ts":i,mockjs:T,ut2:y},renderOpts:{compile:function(){var h=a()(l()().mark(function v(){var d,g=arguments;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.e(1216).then(e.bind(e,11333));case 2:return n.abrupt("return",(d=n.sent).default.apply(d,g));case 3:case"end":return n.stop()}},v)}));function b(){return h.apply(this,arguments)}return b}()}},"biz-table-demo-freight":{component:r.memo(r.lazy(function(){return e.e(7423).then(e.bind(e,83682))})),asset:{type:"BLOCK",id:"biz-table-demo-freight",refAtomIds:["biz-table"],dependencies:{"index.tsx":{type:"FILE",value:e(68175).Z},react:{type:"NPM",value:"18.3.1"},ut2:{type:"NPM",value:"1.21.0"},"rc-hooks":{type:"NPM",value:"3.2.0"},antd:{type:"NPM",value:"6.1.3"},"antd-more":{type:"NPM",value:"6.0.3"},mockjs:{type:"NPM",value:"1.1.0"},"./components/FreightRule.tsx":{type:"FILE",value:e(31652).Z},clsx:{type:"NPM",value:"2.1.1"},"./index.module.less":{type:"FILE",value:e(47948).Z}},entry:"index.tsx"},context:{"./components/FreightRule.tsx":R,"./index.module.less":C,react:s||(s=e.t(r,2)),ut2:y,"rc-hooks":_,antd:E,"antd-more":c,mockjs:T,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/components/FreightRule/index.tsx":R,clsx:B,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/components/FreightRule/index.module.less":C},renderOpts:{compile:function(){var h=a()(l()().mark(function v(){var d,g=arguments;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.e(1216).then(e.bind(e,11333));case 2:return n.abrupt("return",(d=n.sent).default.apply(d,g));case 3:case"end":return n.stop()}},v)}));function b(){return h.apply(this,arguments)}return b}()}},"biz-table-demo-polling":{component:r.memo(r.lazy(function(){return e.e(7423).then(e.bind(e,9118))})),asset:{type:"BLOCK",id:"biz-table-demo-polling",refAtomIds:["biz-table"],dependencies:{"index.tsx":{type:"FILE",value:e(32561).Z},react:{type:"NPM",value:"18.3.1"},antd:{type:"NPM",value:"6.1.3"},"antd-more":{type:"NPM",value:"6.0.3"},"./service.ts":{type:"FILE",value:e(68632).Z},mockjs:{type:"NPM",value:"1.1.0"},ut2:{type:"NPM",value:"1.21.0"}},entry:"index.tsx"},context:{"./service.ts":i,react:s||(s=e.t(r,2)),antd:E,"antd-more":c,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/service.ts":i,mockjs:T,ut2:y},renderOpts:{compile:function(){var h=a()(l()().mark(function v(){var d,g=arguments;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.e(1216).then(e.bind(e,11333));case 2:return n.abrupt("return",(d=n.sent).default.apply(d,g));case 3:case"end":return n.stop()}},v)}));function b(){return h.apply(this,arguments)}return b}()}},"biz-table-demo-demo4":{component:r.memo(r.lazy(function(){return e.e(7423).then(e.bind(e,16232))})),asset:{type:"BLOCK",id:"biz-table-demo-demo4",refAtomIds:["biz-table"],dependencies:{"index.tsx":{type:"FILE",value:e(52347).Z},react:{type:"NPM",value:"18.3.1"},"antd-more":{type:"NPM",value:"6.0.3"},"../../biz-form/demos/constants.ts":{type:"FILE",value:e(90520).Z},"./service.ts":{type:"FILE",value:e(68632).Z},"./constants.ts":{type:"FILE",value:e(14156).Z},lcn:{type:"NPM",value:"7.2.0"},mockjs:{type:"NPM",value:"1.1.0"},ut2:{type:"NPM",value:"1.21.0"}},entry:"index.tsx"},context:{"../../biz-form/demos/constants.ts":z,"./service.ts":i,"./constants.ts":f,react:s||(s=e.t(r,2)),"antd-more":c,"/home/runner/work/antd-more/antd-more/src/biz-form/demos/constants.ts":z,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/service.ts":i,"/home/runner/work/antd-more/antd-more/src/biz-table/demos/constants.ts":f,lcn:M,mockjs:T,ut2:y},renderOpts:{compile:function(){var h=a()(l()().mark(function v(){var d,g=arguments;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.e(1216).then(e.bind(e,11333));case 2:return n.abrupt("return",(d=n.sent).default.apply(d,g));case 3:case"end":return n.stop()}},v)}));function b(){return h.apply(this,arguments)}return b}()}}}},34334:function(m,t,e){e.r(t),e.d(t,{BillAccountOptions:function(){return a},CycleOptions:function(){return l},ECycle:function(){return p},RakebackeCycleOptions:function(){return I},pcOptions:function(){return r},pcaOptions:function(){return c}});var s=e(83704),p=function(i){return i.Day="1",i.Month="2",i.Quarter="3",i}({}),l=[{label:"\u6309\u65E5",value:p.Day},{label:"\u6309\u6708",value:p.Month},{label:"\u6309\u5B63\u5EA6",value:p.Quarter}],I=[{label:"\u65E5\u8FD4",value:p.Day},{label:"\u6708\u8FD4",value:p.Month}],a=[{label:"\u5F20\u4E09",value:"a"},{label:"\u674E\u56DB",value:"b"}],r=(0,s.getPC)({fieldNames:{code:"value",name:"label"},inland:!0}),c=(0,s.getPCA)({fieldNames:{code:"value",name:"label"},inland:!0})},67849:function(m,t,e){e.r(t),e.d(t,{FreightRuleOptions:function(){return u},FreightRuleType:function(){return o}});var s=e(26068),p=e.n(s),l=e(48305),I=e.n(l),a=e(67825),r=e.n(a),c=e(75271),i=e(78406),T=e(44733),P=e(4814),y=e(96653),E=e(52676),f=["id","freight","freightRule","onChange","className"],o=function(R){return R.Need="0",R.No="1",R.NoExpress="2",R}({}),u=[{label:"\u5305\u90AE",value:o.No},{label:"\u4E0D\u5305\u90AE",value:o.Need},{label:"\u4E0D\u914D\u9001",value:o.NoExpress}],_=function(B){var C=B.id,z=B.freight,M=B.freightRule,D=B.onChange,h=B.className,b=r()(B,f),v=c.useRef(null),d=c.useState(z),g=I()(d,2),x=g[0],n=g[1],j=c.useCallback(function(O){var A=O.target.value,N=A!==o.Need?0:x;n(N),D==null||D({id:C,freightRule:A,freight:N}),A===o.Need&&v&&setTimeout(function(){var L;(L=v.current)===null||L===void 0||L.focus()},0)},[x,C,D]),S=c.useCallback(function(O){n(O),D==null||D({id:C,freightRule:M,freight:O})},[M,C,D]);return(0,E.jsx)(i.ZP.Group,p()(p()({className:(0,P.default)(y.default.wrapper,h),onChange:j,value:M},b),{},{children:u.map(function(O){var A="id"+C+(O.value+"");return(0,E.jsxs)(i.ZP,{value:O.value,children:[O.label,O.value===o.Need&&M===o.Need&&(0,E.jsxs)("div",{className:y.default.inputWrapper,style:M!==o.Need?{display:"none"}:{},children:[(0,E.jsx)("label",{htmlFor:A,children:"\u8FD0\u8D39"}),(0,E.jsx)(T.Z,{name:A,id:A,value:x,precision:2,min:0,max:999,onChange:S,ref:v}),"\u5143"]})]},O.value)})}))};t.default=_},25517:function(m,t,e){e.r(t),e.d(t,{ApproveStatusOptions:function(){return p},BankOptions:function(){return I},EApproveStatus:function(){return s},EBank:function(){return l}});var s=function(a){return a.Processing="1",a.Approve="2",a.Refused="3",a}({}),p=[{label:"\u5F85\u5BA1\u6838",value:s.Processing,badge:{status:"processing"}},{label:"\u5BA1\u6838\u901A\u8FC7",value:s.Approve,badge:{status:"success"}},{label:"\u5BA1\u6838\u62D2\u7EDD",value:s.Refused,badge:{status:"error"}}],l=function(a){return a.BOC="BOC",a.BCM="BCM",a.ABC="ABC",a}({}),I=[{label:"\u4E2D\u56FD\u94F6\u884C",value:l.BOC},{label:"\u4EA4\u901A\u94F6\u884C",value:l.BCM},{label:"\u4E2D\u56FD\u519C\u4E1A\u94F6\u884C",value:l.ABC}]},81495:function(m,t,e){e.r(t),e.d(t,{getApplyList:function(){return y}});var s=e(90228),p=e.n(s),l=e(87999),I=e.n(l),a=e(82092),r=e.n(a),c=e(90674),i=e.n(c),T=e(8548),P=function(o){var u=o.page,_=u.pageNum,R=u.pageSize;return i().mock(r()(r()({},"data|".concat(R),[{applyCode:"@word(6)",applicantName:"@cname",approverName:"@cname",createTime:"@datetime",approveTime:"@datetime","approveResult|1":["1","2","3"],"money|0-10000.0-2":0,remark:"@cword(10,20)"}]),"pageInfo",{total:50,pages:_||10}))};function y(f){return E.apply(this,arguments)}function E(){return E=I()(p()().mark(function f(o){return p()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,T.Z)();case 2:return _.abrupt("return",P(o));case 3:case"end":return _.stop()}},f)})),E.apply(this,arguments)}},42408:function(m,t,e){e.r(t),e.d(t,{INFINITY_DATE_LABEL:function(){return y},INFINITY_DATE_VALUE:function(){return P},formatDateRange:function(){return f},normalizeDateString:function(){return E},renderBase64:function(){return c},renderOmitted:function(){return r},renderRemark:function(){return i},renderStatus:function(){return T}});var s=e(75271),p=e(17709),l=e(43385),I=e(99185),a=e(52676),r=function(u){if(u&&u.length>10){var _=u.substring(0,3),R=u.substring(u.length-2);return"".concat(_,"...").concat(R)}return u},c=function(u){if(u){var _=(0,p.Z)(u);return(0,a.jsx)(I.Z,{valueType:"image",value:_})}return"-"};function i(o){var u=o&&o.indexOf(`
`)>-1?(0,a.jsx)(a.Fragment,{children:o.split(`
`).map(function(_){return(0,a.jsx)("div",{style:{marginBottom:5},children:_},_)})}):o;return(0,a.jsx)(l.Z.Text,{style:{maxWidth:160,color:"gray"},ellipsis:{tooltip:u},children:u||"-"})}var T=function(u){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return(0,a.jsxs)("div",{children:[(0,a.jsx)(I.Z,{value:u,valueType:"enumBadge",valueEnum:_}),R&&(0,a.jsx)("div",{children:i(R)})]})},P="9999-12-31",y="\u957F\u671F";function E(o){return o===y?P:o}function f(o,u){if(!o&&!u)return"-";var _=u===P?y:u;return(o||"-")+" ~ "+(_||"-")}},96653:function(m,t,e){e.r(t);var s=e(56487),p=e.n(s),l=e(43838),I=e.n(l),a=e(79556),r=e.n(a),c=e(75612),i=e.n(c),T=e(37743),P=e.n(T),y=e(82061),E=e.n(y),f=e(95388),o={};o.styleTagTransform=E(),o.setAttributes=i(),o.insert=r().bind(null,"head"),o.domAPI=I(),o.insertStyleElement=P();var u=p()(f.Z,o);t.default=f.Z&&f.Z.locals?f.Z.locals:void 0},95388:function(m,t,e){var s=e(58010),p=e.n(s),l=e(86147),I=e.n(l),a=I()(p());a.push([m.id,`.VaMgH6DrCkCYYvfRlxML label {
  white-space: nowrap;
}
.tjmpkbbSMvkk04ObtrzK {
  display: inline-flex;
  align-items: center;
  margin: -5px 0 -5px 8px;
  color: gray;
}
.tjmpkbbSMvkk04ObtrzK .ant-input-number {
  margin: 0 8px;
}
`,""]),a.locals={wrapper:"VaMgH6DrCkCYYvfRlxML",inputWrapper:"tjmpkbbSMvkk04ObtrzK"},t.Z=a},90520:function(m,t){t.Z=`import { getPC, getPCA } from 'lcn';

// \u5468\u671F
// 1-\u65E5 2-\u6708 3-\u5B63
export enum ECycle {
  Day = '1',
  Month = '2',
  Quarter = '3'
}
export const CycleOptions = [
  {
    label: '\u6309\u65E5',
    value: ECycle.Day
  },
  {
    label: '\u6309\u6708',
    value: ECycle.Month
  },
  {
    label: '\u6309\u5B63\u5EA6',
    value: ECycle.Quarter
  }
];

// \u8FD4\u4F63\u5468\u671F\u9009\u9879
export const RakebackeCycleOptions = [
  {
    label: '\u65E5\u8FD4',
    value: ECycle.Day
  },
  {
    label: '\u6708\u8FD4',
    value: ECycle.Month
  }
];

// \u6536\u6B3E\u8D26\u53F7\u9009\u9879
export const BillAccountOptions = [
  {
    label: '\u5F20\u4E09',
    value: 'a'
  },
  {
    label: '\u674E\u56DB',
    value: 'b'
  }
];

// \u7701\u5E02\u6570\u636E
export const pcOptions = getPC({ fieldNames: { code: 'value', name: 'label' }, inland: true });

// \u7701\u5E02\u533A\u6570\u636E
export const pcaOptions = getPCA({ fieldNames: { code: 'value', name: 'label' }, inland: true });
`},57821:function(m,t){t.Z=`import React from 'react';
import { BizTable, BizTableRequest, BizTableColumnsType } from 'antd-more';
import { getApplyList, DataItem } from './service';

const columns: BizTableColumnsType<DataItem> = [
  {
    valueType: 'indexBorder'
  },
  {
    dataIndex: 'applyCode',
    title: '\u7533\u8BF7\u7F16\u53F7',
    tooltip: '\u63D0\u793A\u6587\u5B57',
    search: true
  },
  {
    dataIndex: 'createTime',
    title: '\u63D0\u4EA4\u65F6\u95F4',
    valueType: 'dateTime',
    search: {
      valueType: 'date',
      order: 1
    }
  },
  {
    dataIndex: 'applicantName',
    title: '\u7ECF\u529E\u5458'
  },
  {
    dataIndex: 'approveTime',
    title: '\u5BA1\u6838\u65F6\u95F4',
    tooltip: '\u63D0\u793A\u6587\u5B57',
    sorter: true,
    valueType: 'dateTime',
    search: {
      valueType: 'dateTimeRange',
      names: ['startTime', 'endTime'],
      colProps: { lg: 12, md: 24 },
      order: 2
    }
  },
  {
    dataIndex: 'approverName',
    title: '\u5BA1\u6838\u5458',
    search: true
  }
];

const Demo = () => {
  const request: BizTableRequest<DataItem> = (params, filters, sorter, extra) => {
    const { pageSize, current, ...restParams } = params;
    console.log(params, filters, sorter, extra);

    return getApplyList({
      page: {
        pageSize,
        pageNum: current
      },
      data: restParams
    }).then((res) => {
      return {
        total: res.pageInfo.total,
        data: res.data
      };
    });
  };

  return <BizTable request={request} columns={columns} rowKey="applyCode" toolbarAction />;
};

export default Demo;
`},26994:function(m,t){t.Z=`import React from 'react';
import { Button, Card, Space, message, FormInstance } from 'antd';
import { BizTable, BizTableActionType, BizTableRequest, BizTableColumnsType } from 'antd-more';
import { getApplyList, DataItem } from './service';
import { ApproveStatusOptions } from './constants';

const Demo = () => {
  const formRef = React.useRef<FormInstance>(undefined);
  const actionRef = React.useRef<BizTableActionType>(undefined);
  const request: BizTableRequest<DataItem> = (params, filters, sorter, extra) => {
    const { pageSize, current, ...restParams } = params;
    console.log(params, filters, sorter, extra);

    return getApplyList({
      page: {
        pageSize,
        pageNum: current
      },
      data: restParams
    }).then((res) => {
      return {
        total: res.pageInfo.total,
        data: res.data
      };
    });
  };

  const columns: BizTableColumnsType<DataItem> = [
    {
      dataIndex: 'applyCode',
      title: '\u7533\u8BF7\u7F16\u53F7',
      search: true,
      hidden: true
    },
    {
      dataIndex: 'createTime',
      title: '\u63D0\u4EA4\u65F6\u95F4',
      valueType: 'text'
    },
    {
      dataIndex: 'money',
      title: '\u91D1\u989D',
      valueType: 'money',
      align: 'right',
      // \u5199\u6CD5\u4E00\uFF0C\u4F20\u5165\u8F6C\u6362\u6BD4\u7387
      field: {
        ratio: 0.01, // \u5206\u8F6C\u5143
        prefix: '\xA5'
      }
      // \u5199\u6CD5\u4E8C\uFF0C\u4F20\u9012\u7ED9 BizField\u7684\u53C2\u6570
      // field: {
      //   formatValue: (value) => divide(value, 100), // \u5206\u8F6C\u5143
      //   prefix: '\xA5'
      // }
      // \u5199\u6CD5\u4E09\uFF0C\u53EF\u5173\u8054\u5F53\u524D\u6570\u636E\u914D\u7F6E
      // field: (text, record, index) => {
      //   console.log(text, record, index);
      //   return {
      //     formatValue: value => divide(value, 100), // \u5206\u8F6C\u5143
      //     prefix: \`\${record.applicantName} \`,
      //   }
      // }
    },
    {
      dataIndex: 'approveTime',
      title: '\u5BA1\u6838\u65F6\u95F4',
      sorter: true,
      valueType: 'dateTime',
      search: {
        valueType: 'dateTimeRange',
        names: ['startTime', 'endTime'],
        colProps: { md: 24, lg: 12, xxl: 12 },
        order: 1
      }
    },
    {
      dataIndex: 'approverName',
      title: '\u5BA1\u6838\u5458'
    },
    {
      dataIndex: 'approveResult',
      title: '\u5BA1\u6838\u72B6\u6001',
      filters: ApproveStatusOptions.map((item) => ({ text: item.label, ...item })),
      valueType: 'enumBadge',
      valueEnum: ApproveStatusOptions,
      search: {
        name: 'approveStatus',
        all: true,
        initialValue: ''
      }
    },
    {
      title: '\u64CD\u4F5C',
      render: () => (
        <Space size="middle">
          <a
            onClick={() => {
              actionRef.current?.reload();
            }}
          >
            reload
          </a>
          <a
            onClick={() => {
              actionRef.current?.submit();
            }}
          >
            submit
          </a>
          <a
            onClick={() => {
              actionRef.current?.reset();
            }}
          >
            reset
          </a>
        </Space>
      )
    }
  ];

  return (
    <BizTable
      request={request}
      columns={columns}
      rowKey="applyCode"
      pagination={{
        pageSize: 5
      }}
      formRef={formRef}
      actionRef={actionRef}
      form={{
        submitter: {
          render: (_, submitterDom) => {
            return (
              <Space>
                {submitterDom}
                <Button key="export" onClick={() => message.success('\u70B9\u51FB\u5BFC\u51FA\u6309\u94AE')}>
                  \u5BFC\u51FA
                </Button>
              </Space>
            );
          }
        },
        defaultColsNumber: 1
      }}
      toolbar={
        <Space>
          <Button type="primary" onClick={() => message.success('\u70B9\u51FB\u65B0\u589E\u6309\u94AE')}>
            \u65B0\u589E
          </Button>
          <Button
            onClick={() => {
              formRef.current!.setFieldsValue({ applyCode: '12345' });
            }}
          >
            \u8D4B\u503C
          </Button>
        </Space>
      }
      toolbarAction
      fullScreenBackgroundColor="rgba(0,0,0,0.1)"
      extra={<Card variant="borderless">Extra Block!</Card>}
    />
  );
};

export default Demo;
`},91403:function(m,t){t.Z=`import React from 'react';
import { BizTable, BizTableRequest, BizTableColumnsType } from 'antd-more';
import { getApplyList, DataItem } from './service';

const columns: BizTableColumnsType<DataItem> = [
  {
    dataIndex: 'applyCode',
    title: '\u7533\u8BF7\u7F16\u53F7'
  },
  {
    dataIndex: 'createTime',
    title: '\u63D0\u4EA4\u65F6\u95F4'
  },
  {
    dataIndex: 'applicantName',
    title: '\u7ECF\u529E\u5458'
  },
  {
    dataIndex: 'approveTime',
    title: '\u5BA1\u6838\u65F6\u95F4',
    sorter: true
  },
  {
    dataIndex: 'approverName',
    title: '\u5BA1\u6838\u5458'
  }
];

const Demo = () => {
  const request: BizTableRequest<DataItem> = (params, filters, sorter, extra) => {
    const { pageSize, current, ...restParams } = params;
    console.log(params, filters, sorter, extra);

    return getApplyList({
      page: {
        pageSize,
        pageNum: current
      },
      data: restParams
    }).then((res) => {
      return {
        total: res.pageInfo.total,
        data: res.data
      };
    });
  };

  return (
    <BizTable
      request={request}
      columns={columns}
      rowKey="applyCode"
      pagination={{
        pageSize: 5
      }}
      compact
    />
  );
};

export default Demo;
`},52347:function(m,t){t.Z=`import React from 'react';
import { BizTable, BizTableRequest, BizTableColumnsType } from 'antd-more';
import { getApplyList, DataItem } from './service';
import { ApproveStatusOptions } from './constants';
import { pcOptions } from '../../biz-form/demos/constants';

const columns: BizTableColumnsType<DataItem> = [
  {
    dataIndex: 'applyCode',
    title: '\u7533\u8BF7\u7F16\u53F7',
    tooltip: '\u63D0\u793A\u6587\u5B57',
    search: true // \u65E0 valueType\uFF0C\u9ED8\u8BA4\u4E3A ItemInput
  },
  {
    dataIndex: 'createTime',
    title: '\u63D0\u4EA4\u65F6\u95F4',
    search: {
      itemType: 'date' // \u65E5\u671F
    }
  },
  {
    dataIndex: 'applicantName',
    title: '\u7ECF\u529E\u5458'
  },
  {
    dataIndex: 'dateTimeRange',
    title: '\u65E5\u671F\u65F6\u95F4\u533A\u95F4',
    tooltip: '\u63D0\u793A\u6587\u5B57',
    sorter: true,
    search: {
      valueType: 'dateTimeRange', // \u65E5\u671F\u8303\u56F4\uFF0C\u5F53valueType\u4E0D\u6EE1\u8DB3\u65F6\uFF0C\u4F7F\u7528 itemType \u6307\u5B9A formItem \u7C7B\u578B
      names: ['startTime', 'endTime'],
      initialValue: ['2020-10-10 00:00:00', '2020-11-11 11:11:11'],
      colProps: { lg: 12, md: 24 },
      order: 9
    },
    hidden: true
  },
  {
    dataIndex: 'approverName',
    title: '\u5BA1\u6838\u5458',
    search: true,
    hidden: true
  },
  {
    dataIndex: 'money',
    valueType: 'money', // progress percent \u4E00\u6837
    title: '\u6570\u5B57',
    search: true,
    hidden: true
  },
  {
    dataIndex: 'color',
    valueType: 'color',
    title: '\u989C\u8272',
    search: true,
    hidden: true
  },
  {
    dataIndex: 'select',
    valueType: 'enum', // enumTag enumBadge \u4E00\u6837
    valueEnum: ApproveStatusOptions,
    title: '\u9009\u62E9\u5668',
    search: {
      all: true,
      initialValue: ''
    },
    hidden: true
  },
  {
    dataIndex: 'radio',
    valueType: 'enum',
    valueEnum: ApproveStatusOptions,
    title: '\u5355\u9009\u6846',
    search: {
      itemType: 'radio',
      all: true,
      initialValue: '',
      colProps: { md: 24, lg: 24, xxl: 24 }
    },
    hidden: true
  },
  {
    dataIndex: 'checkbox',
    valueType: 'enum',
    valueEnum: ApproveStatusOptions,
    title: '\u591A\u9009\u6846',
    search: {
      itemType: 'checkbox',
      all: true,
      colProps: { md: 24, lg: 24, xxl: 24 }
    },
    hidden: true
  },
  {
    dataIndex: 'dateWeek',
    valueType: 'dateWeek',
    title: '\u5468',
    search: {
      order: 1
    },
    hidden: true
  },
  {
    dataIndex: 'dateMonth',
    valueType: 'dateMonth',
    title: '\u6708',
    search: {
      order: 2
    },
    hidden: true
  },
  {
    dataIndex: 'dateQuarter',
    valueType: 'dateQuarter',
    title: '\u5B63',
    search: {
      order: 3
    },
    hidden: true
  },
  {
    dataIndex: 'dateYear',
    valueType: 'dateYear',
    title: '\u5E74',
    search: {
      order: 4
    },
    hidden: true
  },
  {
    dataIndex: 'dateTime',
    valueType: 'dateTime',
    title: '\u65E5\u671F\u65F6\u95F4',
    search: {
      order: 5
    },
    hidden: true
  },
  {
    dataIndex: 'time',
    valueType: 'time',
    title: '\u65F6\u95F4',
    search: {
      order: 6
    },
    hidden: true
  },
  {
    dataIndex: 'dateRange',
    valueType: 'dateRange',
    title: '\u65E5\u671F\u533A\u95F4',
    search: {
      colProps: { lg: 12, md: 24 },
      order: 7
    },
    hidden: true
  },
  {
    dataIndex: 'timeRange',
    valueType: 'timeRange',
    title: '\u65F6\u95F4\u533A\u95F4',
    search: {
      colProps: { lg: 12, md: 24 },
      order: 8
    },
    hidden: true
  },
  {
    dataIndex: 'slider',
    title: '\u81EA\u5B9A\u4E49\u6ED1\u52A8\u6761',
    search: {
      // render: ({ dataIndex, title }, dom, form) => (
      //   <BizFormItem name={dataIndex} label={title as string} colProps={{ lg: 12, md: 24 }}>
      //     <Slider />
      //   </BizFormItem>
      // ),
      itemType: 'slider',
      order: 10
    },
    hidden: true
  },
  {
    dataIndex: 'cascader',
    title: '\u7701\u5E02',
    search: {
      itemType: 'cascader',
      options: pcOptions,
      colProps: { lg: 12, md: 24 },
      order: 11
    },
    hidden: true
  }
];

const Demo = () => {
  const request: BizTableRequest<DataItem> = (params, filters, sorter, extra) => {
    const { pageSize, current, ...restParams } = params;
    console.log(params, filters, sorter, extra);

    return getApplyList({
      page: {
        pageSize,
        pageNum: current
      },
      data: restParams
    }).then((res) => {
      return {
        total: res.pageInfo.total,
        data: res.data
      };
    });
  };

  return (
    <BizTable
      request={request}
      columns={columns}
      rowKey="applyCode"
      pagination={{
        pageSize: 5
      }}
      form={{
        labelWidth: 112,
        colProps: { xxl: 8 }
      }}
    />
  );
};

export default Demo;
`},62126:function(m,t){t.Z=`import React from 'react';
import { sleep } from 'ut2';
import { BizTable, BizTableRequest, BizTableColumnsType } from 'antd-more';
import { getApplyList } from './service';
import { EApproveStatus, ApproveStatusOptions } from './constants';

async function getAsyncInitialValues() {
  await sleep(5000);
  return {
    applyCode: '123456',
    createTime: '2020-10-10',
    approveResult: EApproveStatus.Processing
  };
}

const columns: BizTableColumnsType = [
  {
    dataIndex: 'applyCode',
    title: '\u7533\u8BF7\u7F16\u53F7',
    search: true
  },
  {
    dataIndex: 'createTime',
    title: '\u63D0\u4EA4\u65F6\u95F4',
    sorter: true,
    search: {
      valueType: 'date'
    }
  },
  {
    dataIndex: 'approveResult',
    title: '\u5BA1\u6838\u72B6\u6001',
    filters: ApproveStatusOptions.map((item) => ({ text: item.label, ...item })),
    valueType: 'enumBadge',
    valueEnum: ApproveStatusOptions,
    search: {
      itemType: 'select',
      all: true
    }
  }
];

const Demo = () => {
  const [ready, setReady] = React.useState(false);
  const [initialValues, setInitialValues] = React.useState<any>();
  const request: BizTableRequest = (params, filters, sorter, extra) => {
    const { pageSize, current, ...restParams } = params;
    console.log(params, filters, sorter, extra);

    return getApplyList({
      page: {
        pageSize,
        pageNum: current
      },
      data: restParams
    }).then((res) => {
      return {
        total: res.pageInfo.total,
        data: res.data
      };
    });
  };

  React.useEffect(() => {
    // \u5F02\u6B65\u83B7\u53D6\u8868\u5355\u521D\u59CB\u503C
    getAsyncInitialValues().then((res) => {
      setInitialValues(res);
      setReady(true);
    });
  }, []);

  return (
    <BizTable
      request={request}
      columns={columns}
      rowKey="applyCode"
      ready={ready}
      form={{
        initialValues
      }}
    />
  );
};

export default Demo;
`},47948:function(m,t){t.Z=`.wrapper {
  :global {
    label {
      white-space: nowrap;
    }
  }
}

.inputWrapper {
  display: inline-flex;
  align-items: center;
  margin: -5px 0 -5px 8px;
  color: gray;

  :global {
    .ant-input-number {
      margin: 0 8px;
    }
  }
}
`},31652:function(m,t){t.Z=`import React from 'react';
import { Radio, InputNumber, RadioGroupProps, RadioChangeEvent, GetRef } from 'antd';
import clsx from 'clsx';
import styles from './index.module.less';

type InputNumberRef = GetRef<typeof InputNumber>;

// \u914D\u9001\u89C4\u5219
// 0--\u4E0D\u5305\u90AE 1--\u5305\u90AE 2-\u4E0D\u914D\u9001
export enum FreightRuleType {
  Need = '0',
  No = '1',
  NoExpress = '2'
}

// \u914D\u9001\u89C4\u5219\u9009\u9879
export const FreightRuleOptions = [
  {
    label: '\u5305\u90AE',
    value: FreightRuleType.No
  },
  {
    label: '\u4E0D\u5305\u90AE',
    value: FreightRuleType.Need
  },
  {
    label: '\u4E0D\u914D\u9001',
    value: FreightRuleType.NoExpress
  }
];

export type FreightItem = {
  id: number | string;
  freight: number;
  freightRule: FreightRuleType;
};

export interface FreightProps
  extends Omit<RadioGroupProps, 'id' | 'value' | 'onChange'>, FreightItem {
  onChange?: (value: FreightItem) => void;
}

const Freight: React.FC<FreightProps> = ({
  id,
  freight,
  freightRule,
  onChange,
  className,
  ...restProps
}) => {
  const inputRef = React.useRef<InputNumberRef>(null);
  const [freightValue, setFreightValue] = React.useState<number>(freight);

  const handleChangeRadio = React.useCallback(
    (e: RadioChangeEvent) => {
      const val = e.target.value;
      const realFreight = val !== FreightRuleType.Need ? 0 : freightValue;
      setFreightValue(realFreight);

      onChange?.({
        id,
        freightRule: val,
        freight: realFreight
      });

      if (val === FreightRuleType.Need && inputRef) {
        setTimeout(() => {
          inputRef.current?.focus();
        }, 0);
      }
    },
    [freightValue, id, onChange]
  );

  const handleChangeFreight = React.useCallback(
    (val: number | null) => {
      setFreightValue(val!);
      onChange?.({
        id,
        freightRule,
        freight: val!
      });
    },
    [freightRule, id, onChange]
  );

  return (
    <Radio.Group
      className={clsx(styles.wrapper, className)}
      onChange={handleChangeRadio}
      value={freightRule}
      {...restProps}
    >
      {FreightRuleOptions.map((item) => {
        const freightInputName = 'id' + id + (item.value + '');
        return (
          <Radio key={item.value} value={item.value}>
            {item.label}
            {item.value === FreightRuleType.Need && freightRule === FreightRuleType.Need && (
              <div
                className={styles.inputWrapper}
                style={freightRule !== FreightRuleType.Need ? { display: 'none' } : {}}
              >
                <label htmlFor={freightInputName}>\u8FD0\u8D39</label>
                <InputNumber<number>
                  name={freightInputName}
                  id={freightInputName}
                  value={freightValue}
                  precision={2}
                  min={0}
                  max={999}
                  onChange={handleChangeFreight}
                  ref={inputRef}
                />
                \u5143
              </div>
            )}
          </Radio>
        );
      })}
    </Radio.Group>
  );
};

export default Freight;
`},14156:function(m,t){t.Z=`// \u5BA1\u6838\u72B6\u6001
// 1-\u5F85\u5BA1\u6838 2-\u5BA1\u6838\u901A\u8FC7 3-\u5BA1\u6838\u62D2\u7EDD
export enum EApproveStatus {
  Processing = '1',
  Approve = '2',
  Refused = '3'
}
export const ApproveStatusOptions = [
  {
    label: '\u5F85\u5BA1\u6838',
    value: EApproveStatus.Processing,
    badge: {
      status: 'processing'
    }
  },
  {
    label: '\u5BA1\u6838\u901A\u8FC7',
    value: EApproveStatus.Approve,
    badge: {
      status: 'success'
    }
  },
  {
    label: '\u5BA1\u6838\u62D2\u7EDD',
    value: EApproveStatus.Refused,
    badge: {
      status: 'error'
    }
  }
];

// \u94F6\u884C
export enum EBank {
  BOC = 'BOC',
  BCM = 'BCM',
  ABC = 'ABC'
}

// \u94F6\u884C\u9009\u9879
export const BankOptions = [
  {
    label: '\u4E2D\u56FD\u94F6\u884C',
    value: EBank.BOC
  },
  {
    label: '\u4EA4\u901A\u94F6\u884C',
    value: EBank.BCM
  },
  {
    label: '\u4E2D\u56FD\u519C\u4E1A\u94F6\u884C',
    value: EBank.ABC
  }
];
`},48934:function(m,t){t.Z=`import React from 'react';
import { BizTable, BizTableRequest, BizTableColumnsType } from 'antd-more';
import { renderStatus } from './utils/field';
import { getApplyList, DataItem } from './service';
import { EApproveStatus, ApproveStatusOptions } from './constants';

const columns: BizTableColumnsType<DataItem> = [
  {
    valueType: 'indexBorder'
  },
  {
    dataIndex: 'applyCode',
    title: '\u7533\u8BF7\u7F16\u53F7',
    tooltip: '\u63D0\u793A\u6587\u5B57'
  },
  {
    dataIndex: 'money',
    title: '\u91D1\u989D',
    align: 'right',
    valueType: 'money',
    field: {
      ratio: 0.01, // \u5206\u8F6C\u5143
      prefix: '\xA5'
    }
  },
  {
    dataIndex: 'createTime',
    title: '\u63D0\u4EA4\u65F6\u95F4',
    field: {
      valueType: 'text',
      whitespaceLineBreak: true
    },
    search: {
      valueType: 'date',
      order: 1
    }
  },
  {
    dataIndex: 'applicantName',
    title: '\u7ECF\u529E\u5458',
    search: true
  },
  {
    dataIndex: 'approveTime',
    title: '\u5BA1\u6838\u65F6\u95F4',
    tooltip: '\u63D0\u793A\u6587\u5B57',
    sorter: true,
    valueType: 'text',
    field: {
      whitespaceLineBreak: true
    }
  },
  {
    dataIndex: 'approveResult',
    title: '\u5BA1\u6838\u72B6\u6001',
    render: (text, record) => {
      return renderStatus(
        text,
        ApproveStatusOptions,
        text === EApproveStatus.Refused && record.remark ? record.remark : ''
      );
    }
  }
];

const Demo = () => {
  const request: BizTableRequest<DataItem> = (params, filters, sorter, extra) => {
    const { pageSize, current, ...restParams } = params;
    console.log(params, filters, sorter, extra);

    return getApplyList({
      page: {
        pageSize,
        pageNum: current
      },
      data: restParams
    }).then((res) => {
      return {
        total: res.pageInfo.total,
        data: res.data
      };
    });
  };

  return (
    <BizTable request={request} columns={columns} rowKey="applyCode" pagination={{ pageSize: 5 }} />
  );
};

export default Demo;
`},68175:function(m,t){t.Z=`import React from 'react';
import { sleep } from 'ut2';
import { useAsync } from 'rc-hooks';
import { Button, message } from 'antd';
import { BizTable, BizTableColumnsType } from 'antd-more';
import Mockjs from 'mockjs';
import FreightRule, { FreightRuleType } from './components/FreightRule';

type DataItem = {
  freight: number;
  freightRule: FreightRuleType;
  id: number;
  name: string;
};

const services = {
  async getData() {
    await sleep();
    const { data } = Mockjs.mock({
      'data|3-5': [
        {
          freight: '@float(0.01,999,0,2)',
          'freightRule|1': ['0', '1', '2'],
          'id|+1': 0,
          name: '@city'
        }
      ]
    }) as {
      data: {
        freight: number;
        freightRule: FreightRuleType;
        id: number;
        name: string;
      }[];
    };
    return {
      success: true,
      data: data.map((item) => {
        if (item.freightRule !== FreightRuleType.Need) {
          return {
            ...item,
            freight: 0
          };
        }
        return item;
      })
    };
  },
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  async update(data: DataItem[]) {
    await sleep();
    return {
      success: true
    };
  }
};

function reducer(state: DataItem[], action: { type: string; [key: string]: any }) {
  const { type, ...rest } = action;

  switch (type) {
    case 'update':
      if (state.find((item) => item.id === action.id)) {
        return state.map((item) => {
          if (item.id === action.id) {
            return {
              ...item,
              ...rest
            };
          }
          return item;
        });
      }
      return [...state, rest as DataItem];
    case 'clear':
      return [];
    default:
      return state;
  }
}

const Freight = () => {
  const [state, dispatch] = React.useReducer(reducer, []);

  const columns: BizTableColumnsType<DataItem> = [
    {
      valueType: 'indexBorder'
    },
    {
      title: '\u5730\u533A',
      dataIndex: 'name',
      width: 170
    },
    {
      title: '\u89C4\u5219',
      dataIndex: 'freightRule',
      render: (_, record) => {
        const currentState = state.find((item) => item.id === record.id);
        return (
          <FreightRule
            {...record}
            {...currentState}
            onChange={(values) => {
              dispatch({
                type: 'update',
                ...values
              });
            }}
          />
        );
      }
    }
  ];

  const {
    data = [],
    refresh: refreshData,
    loading
  } = useAsync(() => services.getData().then((res) => res.data));
  const { run: update, loading: updating } = useAsync(() => services.update(state), {
    autoRun: false
  });

  const handleUpdate = () => {
    if (!state || state.length === 0) {
      message.info('\u6CA1\u6709\u4FEE\u6539\u9879');
      return;
    }
    if (state.find((item) => item.freightRule === FreightRuleType.Need && item.freight === 0)) {
      message.error('\u8FD0\u8D39\u4E0D\u80FD\u4E3A0');
      return;
    }
    update().then(() => {
      dispatch({ type: 'clear' });
      refreshData();
    });
  };

  return (
    <BizTable
      autoRequest={false}
      dataSource={data}
      columns={columns}
      pagination={false}
      rowKey="id"
      loading={loading || updating}
      toolbar={
        <Button type="primary" onClick={handleUpdate} disabled={loading} loading={updating}>
          \u66F4\u65B0
        </Button>
      }
      toolbarAction={{
        // fullScreen: true,
        // density: true,
        reload: false // \u6CA1\u6709\u8BF7\u6C42
        // columnSetting: true,
      }}
    />
  );
};

export default Freight;
`},32561:function(m,t){t.Z=`import React from 'react';
import { Space, Switch } from 'antd';
import { BizTable, BizTableRequest, BizTableColumnsType, BizTableActionType } from 'antd-more';
import { getApplyList, DataItem } from './service';

const columns: BizTableColumnsType<DataItem> = [
  {
    valueType: 'indexBorder'
  },
  {
    dataIndex: 'applyCode',
    title: '\u7533\u8BF7\u7F16\u53F7',
    tooltip: '\u63D0\u793A\u6587\u5B57',
    search: true
  },
  {
    dataIndex: 'createTime',
    title: '\u63D0\u4EA4\u65F6\u95F4',
    valueType: 'dateTime',
    search: {
      valueType: 'date',
      order: 1
    }
  },
  {
    dataIndex: 'applicantName',
    title: '\u7ECF\u529E\u5458'
  },
  {
    dataIndex: 'approveTime',
    title: '\u5BA1\u6838\u65F6\u95F4',
    tooltip: '\u63D0\u793A\u6587\u5B57',
    sorter: true,
    valueType: 'dateTime',
    search: {
      valueType: 'dateTimeRange',
      names: ['startTime', 'endTime'],
      colProps: { lg: 12, md: 24 },
      order: 2
    }
  },
  {
    dataIndex: 'approverName',
    title: '\u5BA1\u6838\u5458',
    search: true
  }
];

const Demo = () => {
  const [polling, setPolling] = React.useState(false);
  const actionRef = React.useRef<BizTableActionType>(undefined);
  const request: BizTableRequest<DataItem> = (params, filters, sorter, extra) => {
    const { pageSize, current, ...restParams } = params;
    console.log(params, filters, sorter, extra);

    return getApplyList({
      page: {
        pageSize,
        pageNum: current
      },
      data: restParams
    }).then((res) => {
      return {
        total: res.pageInfo.total,
        data: res.data
      };
    });
  };

  const handleChangePolling = (val: boolean) => {
    setPolling(val);

    if (val) {
      // \u6B64\u5904\u4F7F\u7528\u5EF6\u65F6\uFF0C\u662F\u56E0\u4E3A pollingInterval \u4F9D\u8D56 polling \u914D\u7F6E\uFF0C\u6240\u4EE5\u8981\u7B49 setState \u66F4\u65B0\u540E\u518D\u89E6\u53D1\u8BF7\u6C42\u3002
      setTimeout(() => {
        // \u5F00\u542F\u540E\u9700\u8981\u89E6\u53D1\u4E00\u6B21\u8BF7\u6C42\u624D\u751F\u6548
        actionRef.current?.reload();
      });
    }
  };

  return (
    <div>
      <Space style={{ marginBottom: 16 }}>
        \u81EA\u52A8\u8F6E\u8BE2
        <Switch
          checkedChildren="\u5F00\u542F"
          unCheckedChildren="\u5173\u95ED"
          checked={polling}
          onChange={handleChangePolling}
        />
      </Space>

      <BizTable
        request={request}
        columns={columns}
        rowKey="applyCode"
        toolbarAction
        actionRef={actionRef}
        asyncOptions={{
          pollingInterval: polling ? 3000 : undefined
        }}
      />
    </div>
  );
};

export default Demo;
`},36297:function(m,t){t.Z=`import React from 'react';
import { FormInstance } from 'antd';
import { BizTable, BizTableRequest, BizTableColumnsType, BizTableActionType } from 'antd-more';
import { getApplyList, DataItem } from './service';

const columns: BizTableColumnsType<DataItem> = [
  {
    valueType: 'indexBorder'
  },
  {
    dataIndex: 'applyCode',
    title: '\u7533\u8BF7\u7F16\u53F7',
    tooltip: '\u63D0\u793A\u6587\u5B57',
    search: true
  },
  {
    dataIndex: 'money',
    title: '\u91D1\u989D',
    valueType: 'money',
    align: 'right',
    // \u4F20\u9012\u7ED9 BizField\u7684\u53C2\u6570
    field: {
      ratio: 0.01, // \u5206\u8F6C\u5143
      prefix: '\xA5'
    }
  },
  {
    dataIndex: 'createTime',
    title: '\u63D0\u4EA4\u65F6\u95F4',
    valueType: 'dateTime',
    search: {
      valueType: 'date',
      order: 1
    }
  },
  {
    dataIndex: 'applicantName',
    title: '\u7ECF\u529E\u5458'
  },
  {
    dataIndex: 'approveTime',
    title: '\u5BA1\u6838\u65F6\u95F4',
    tooltip: '\u63D0\u793A\u6587\u5B57',
    sorter: true,
    valueType: 'dateTime',
    search: {
      valueType: 'dateTimeRange',
      names: ['startTime', 'endTime'],
      colProps: { lg: 12, md: 24 },
      order: 2
    }
  },
  {
    dataIndex: 'approverName',
    title: '\u5BA1\u6838\u5458',
    search: true
  }
];

const Demo = () => {
  // \u67E5\u8BE2\u8868\u5355\u5B9E\u4F8B\u5F15\u7528
  const formRef = React.useRef<FormInstance>(undefined);
  // \u64CD\u4F5C\u5F15\u7528
  const actionRef = React.useRef<BizTableActionType>(undefined);

  const request: BizTableRequest<DataItem> = (params, filters, sorter, extra) => {
    const { pageSize, current, ...restParams } = params;
    console.log(params, filters, sorter, extra);
    return getApplyList({
      page: {
        pageSize,
        pageNum: current
      },
      data: restParams
    }).then((res) => {
      return {
        total: res.pageInfo.total,
        data: res.data
      };
    });
  };

  React.useEffect(() => {
    // \u8BBE\u7F6E\u67E5\u8BE2\u8868\u5355\u503C
    formRef.current!.setFieldsValue({
      approverName: '123',
      createTime: '2021-10-28',
      approveTime: ['2021-10-28 00:00:00', '2021-10-28 23:59:59']
    });

    // \u624B\u52A8\u53D1\u8D77\u8BF7\u6C42
    actionRef.current!.submit();
  }, []);

  return (
    <BizTable
      request={request}
      columns={columns}
      rowKey="applyCode"
      pagination={{ pageSize: 5 }}
      toolbarAction
      // \u5173\u95ED\u81EA\u52A8\u8BF7\u6C42
      autoRequest={false}
      formRef={formRef}
      actionRef={actionRef}
    />
  );
};

export default Demo;
`},68632:function(m,t){t.Z=`import Mock from 'mockjs';
import { sleep } from 'ut2';
import { EApproveStatus } from './constants';

export type DataItem = {
  applyCode: string;
  applicantName: string;
  approverName: string;
  createTime: string;
  approveTime: string;
  approveResult: EApproveStatus;
  money: number;
  remark: string;
};

type ApplyListResponse = {
  data: DataItem[];
  pageInfo: {
    total: number;
    pages: number;
  };
};

const applyList = ({
  page: { pageNum, pageSize }
}: {
  page: { pageNum?: number; pageSize: number };
  [key: string]: any;
}) =>
  Mock.mock({
    [\`data|\${pageSize}\`]: [
      {
        applyCode: '@word(6)',
        applicantName: '@cname',
        approverName: '@cname',
        createTime: '@datetime',
        approveTime: '@datetime',
        'approveResult|1': ['1', '2', '3'],
        'money|0-10000.0-2': 0,
        remark: '@cword(10,20)'
      }
    ],
    pageInfo: {
      total: 50,
      pages: pageNum || 10
    }
  }) as ApplyListResponse;

export async function getApplyList(params: Parameters<typeof applyList>[0]) {
  await sleep();
  return applyList(params);
}
`},91793:function(m,t){t.Z=`import React from 'react';
import { setDataURLPrefix } from 'util-helpers';
import { Typography } from 'antd';
import { BizField, EnumData } from 'antd-more';

/**
 * \u6E32\u67D3\u7701\u7565\u5185\u5BB9\u3002
 *
 * @param content \u5185\u5BB9\u3002
 * @returns \u7701\u7565\u540E\u7684\u5185\u5BB9\u3002
 * @example
 * renderOmitted('1234xxxxxxxx567890'); // '123...90'
 */
export const renderOmitted = (content?: string) => {
  if (content && content.length > 10) {
    const before = content.substring(0, 3);
    const after = content.substring(content.length - 2);
    return \`\${before}...\${after}\`;
  }
  return content;
};

/**
 * \u6E32\u67D3 base64 \u56FE\u7247\u3002
 *
 * @param buffer base64 \u5B57\u7B26\u4E32\u3002
 * @returns \u56FE\u7247\u7EC4\u4EF6\u3002
 */
export const renderBase64 = (buffer?: string) => {
  if (buffer) {
    const base64 = setDataURLPrefix(buffer);
    return <BizField valueType="image" value={base64} />;
  }
  return '-';
};

/**
 * \u6E32\u67D3\u5907\u6CE8\u3002
 *
 * @param remark \u5907\u6CE8\u5185\u5BB9\u3002
 * @returns \u5907\u6CE8\u7EC4\u4EF6\u3002
 */
export function renderRemark(remark?: string) {
  const remarkView =
    remark && remark.indexOf('\\n') > -1 ? (
      <>
        {remark.split('\\n').map((item) => (
          <div key={item} style={{ marginBottom: 5 }}>
            {item}
          </div>
        ))}
      </>
    ) : (
      remark
    );
  return (
    <Typography.Text style={{ maxWidth: 160, color: 'gray' }} ellipsis={{ tooltip: remarkView }}>
      {remarkView || '-'}
    </Typography.Text>
  );
}

/**
 * \u6E32\u67D3\u72B6\u6001\u3002
 *
 * @param text \u72B6\u6001\u6587\u672C\u3002
 * @param valueEnum \u72B6\u6001\u9009\u9879\u3002
 * @param reason \u62D2\u7EDD\u539F\u56E0\u3002
 * @returns \u72B6\u6001\u7EC4\u4EF6\u3002
 */
export const renderStatus = (text: string, valueEnum: EnumData = [], reason = '') => {
  return (
    <div>
      <BizField value={text} valueType="enumBadge" valueEnum={valueEnum} />
      {reason && <div>{renderRemark(reason)}</div>}
    </div>
  );
};

/**\u6709\u6548\u671F\u957F\u671F\u503C */
export const INFINITY_DATE_VALUE = '9999-12-31';
/**\u6709\u6548\u671F\u957F\u671F\u6807\u7B7E */
export const INFINITY_DATE_LABEL = '\u957F\u671F';

/**
 * \u89C4\u6574\u5316\u65E5\u671F\u5B57\u7B26\u4E32\u3002
 *
 * @param str \u65E5\u671F\u5B57\u7B26\u4E32\u3002
 * @returns \u89C4\u6574\u5316\u540E\u7684\u65E5\u671F\u5B57\u7B26\u4E32\u3002
 * @example
 * normalizeDateString('\u957F\u671F'); // '9999-12-31'
 * normalizeDateString('2022-01-01'); // '2022-01-01'
 */
export function normalizeDateString(str: string) {
  if (str === INFINITY_DATE_LABEL) {
    return INFINITY_DATE_VALUE;
  }
  return str;
}

/**
 * \u683C\u5F0F\u5316\u65E5\u671F\u533A\u95F4\u3002
 *
 * @param start \u5F00\u59CB\u65E5\u671F\u5B57\u7B26\u4E32\u3002
 * @param end \u7ED3\u675F\u65E5\u671F\u5B57\u7B26\u4E32\u3002
 * @returns \u683C\u5F0F\u5316\u540E\u7684\u65E5\u671F\u533A\u95F4\u5B57\u7B26\u4E32\u3002
 * @example
 * formatDateRange('2022-01-01', '9999-12-31'); // '2022-01-01 ~ \u957F\u671F'
 * formatDateRange('2022-01-01', '2022-01-02'); // '2022-01-01 ~ 2022-01-02'
 */
export function formatDateRange(start?: string, end?: string) {
  if (!start && !end) {
    return '-';
  }
  const realEnd = end === INFINITY_DATE_VALUE ? INFINITY_DATE_LABEL : end;
  return (start || '-') + ' ~ ' + (realEnd || '-');
}
`}}]);
